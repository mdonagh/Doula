<p id="notice"><%= notice %></p>

<div class="container">
  <%# Registry Banner %>
  <div class="row justify-content-around">

    <div class="col-md mx-auto text-center">
        <img src="https://randomuser.me/api/portraits/women/1.jpg" alt="<%= @registry.name %>" class="rounded">
    </div>

    <div class="col-md-8">
      <div class="row justify-content-center">
        <h1><strong><%= @registry.name %></strong></h1>
      </div>

      <div class="row justify-content-around">
        <h5>
          <strong>Expected Arrival Date:  </strong>
          <%= @registry.due_date.strftime("%A, %B %e, %Y") %>
        </h5>

        <h5>
          <strong>Shower Date:  </strong>
          <%= @registry.shower_date.strftime("%A, %B %e, %Y") %>
        </h5>
      </div>
    </div>
 
    <div class="col-md">
      <div class="row justify-content-around">
        <%# TODO: This is a temporary path.  Update once registry guide path is set %>
        <%= link_to "Registry Guide", registries_path, class: "btn btn-primary" %>
      </div>
    </div>
  </div>

  <hr>

  <%# Buttons and dropdown %>
  <div class="col mb-5 mt-5">
    <div class="row mb-5 mr-1 d-flex flex-direction-row justify-content-end">
      <button class="btn btn-light btn-lg dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        Available
      </button>
    </div>
    <div class="row d-flex justify-content-md-around justify-content-center">
      <div>
      <%= link_to "Add Be Her Village Service", services_path, class: "btn btn-secondary btn-lg btn-block mb-3 p-3"%>
      </div>
      <div>
      <%= link_to "Add your own Custom Service", new_service_path, class: "btn btn-secondary btn-lg btn-block mb-3 p-3"%>
      </div>
    </div>
  </div>

  <%# Services %>
  <div class="row justify-content-around">
    <%# Service Card %>
    <% @registry.registry_services.each do |rs|%>
    <div class="card mb-3 shadow" style="width: 18rem;">
      <div>
        <img src="https://placekitten.com/800/400" class="card-img-top" alt="...">
      </div>
      <div class="card-body d-flex flex-column">
        <h5 class="card-subtitle"><strong><%= rs.service.name %></strong></h5>
        <p class="card-text"><%= rs.service.description %></p>
        <div class="mt-auto">
          <h5 class="card-text"><strong>$49.99</strong></h5>
          <div class="row d-flex align-items-end">
            <div class="col d-flex align-items-end">
              <input class="mr-2" type="number" id="service_num" name="service_num" min="1" max="50" value="0">
              <label class="my-auto" for="service_num">Edit</label>
            </div>
            <div class="col d-flex align-items-end flex-column">
              <p class="my-auto">Requested: 1</p>
              <p class="my-auto">Still needs: 1</p>
            </div>
          </div>
        </div>
      </div>
    </div>
    <% end %>
    
  <% if false %>
      <img src=<%= rs.img_url ? rs.img_url :  "https://via.placeholder.com/300x200/"%> class="card-img-top" alt="..."> 


    <!-- <ul>
    <% @registry.registry_services.each do |rs|%>
    <li>
    <%= rs.service.name %>
      <ul>
        <li> <strong>Increments Left: </strong> <%= rs.unpurchased_increments.count %> </li>
        <li> <strong>Increment Cost: </strong> <%= rs.unpurchased_increments.first.price %> </li>
        <li> 
        <%= form_with model: LineItem.new do |f|%>
          <p>
          <%= f.label "Number of Increments:"%>
          <%= f.number_field :quantity %>
          <%= f.hidden_field :registry_service_id, value: rs.id %>
          <%= f.submit "Add Increments to Cart" %>
          </p>
        <% end %>
        </li>
      </ul>
    </li>
    <% end %>
    </ul> --> <% end %>

  </div>

  <%= render partial: "layouts/footer" %>

  <hr>
  <div class="row">
    <%= link_to 'Edit', edit_registry_path(@registry) %> |
    <%= link_to 'Back', registries_path %>
  </div>
</div>

